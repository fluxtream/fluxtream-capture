
<ion-view title={{oTopic.name}}>

  <ion-nav-bar class="nav-title-slide-ios7 bar-positive">
    <a ui-sref="listTopics" ng-click="goBack()" class="button button-clear pull-left"><i class="ion-chevron-left"></i> Back</a>
    <ion-nav-buttons side="right">
      <button menu-toggle="right" class="button button-icon icon ion-navicon"></button>
    </ion-nav-buttons>
  </ion-nav-bar>

  <ion-content class="padding">

    <div class="list">
      <label class="item item-input" id="valueItem">
        <div class="input-label">
          Value
        </div>
      </label>

      <label class="item item-input">
        <div class="input-label">
          Date
        </div>
        <input type="date" value="{{tObservationDate}}" id="observation.observationDate">
      </label>

      <!-- Further testing
      <label class="item item-input">
          <div class="input-label">
              Time
          </div>
          <input type="datetime-local" value="2013-12-09T18:38">
      </label> -->

      <label class="item item-input">
        <div class="input-label">
          Time
        </div>
        <input type="time" value="{{tObservationTime}}" id="observation.observationTime">
      </label>

      <label class="item item-input">
        <div class="input-label">
          Timezone
        </div>
        <input type="text" value="" disabled id="observation.timezone">
      </label>
      
      <label class="item item-input">
        <div class="input-label">
          Geolocation
        </div>
        <span ng-if="geolocationStatus == 'fetching'">
          <span class="geolocation-loading"></span>
        </span>
        <span ng-if="geolocationStatus == 'disabled'">
          Disabled
        </span>
        <span ng-if="geolocationStatus == 'fetched'" >
          {{ geolocationData.coords.latitude.toFixed(6) + ", " + geolocationData.coords.longitude.toFixed(6) }}
        </span>
        <span ng-if="geolocationStatus == 'error'" >
          Unknown <button ng-click="fetchGeolocationData()" class="button button-small geolocation-try-again">Try again</button>
        </span>
      </label>
      
      <label class="item item-input item-stacked-label">
        <span class="input-label">Comment</span>
        <textarea rows="4" class="noResize" id="observation.comment"></textarea>
      </label>
      <!-- Workaround to have a border for comment <label class="item item-input"></label>  -->
      
      <button class="button button-positive button-block" ng-click="createObservation()">
        Save
      </button>
    </div>

  </ion-content>

  <!-- Footer -->
  <div class="bar bar-footer bar-positive">
    <button id="footer-left" class="button button-clear pull-left" ng-click="goBack()" ui-sref="listTopics">Cancel</button>
    <h1 class='title' style='line-height: 100%; padding-top: 6px;'>
      <i class="icon ion-checkmark self-report-footer-icon" ng-if="status =='done'"></i>
      <span ng-if="status != 'offline'"><i class="icon ion-looping self-report-footer-icon" ng-if="status =='loading'"></i></span>
      <a ng-click='reconnectCouchDB()'>
        <i class="icon ion-alert-circled self-report-footer-icon" ng-if="status =='alert'" ></i>
        <img src='./img/icons/offline.png' height='80%' ng-if="status == 'offline'"/>
      </a>
    </h1>
    <button id="footer-right" class="button button-clear pull-right" ng-click="createObservation()">Save</button>
  </div>

</ion-view>
