<ion-view title="Make Observation">
  <ion-nav-bar class="nav-title-slide-ios7 bar-positive">
    <ion-nav-buttons side="right">
      <button menu-toggle="right" class="button button-icon icon ion-navicon"></button>
    </ion-nav-buttons>
  </ion-nav-bar>
  
  <ion-content class="padding">
    <div ng-if="!aoTopics.length">
      <div>
        <p>
          Create a new topic and start making observations.
        </p>
        <button ui-sref="createTopic" class="button button-positive button-block">
          Create a new topic
        </button>
      </div>
    </div>
    <div ng-if="aoTopics.length">
      <div class="text-center padding">
        Tap a topic to make a new observation.
      </div>
      <ion-list>
        <ion-item ng-repeat="oTopic in aoTopics track by $index" ui-sref="createObservation({topicId: oTopic.id})" type="item-link" class="item-icon-right">
          {{oTopic.name}}
          <i class="icon ion-record out-of-sync-icon" ng-if="isTopicOutOfSync(oTopic)"></i>
        </ion-item>
      </ion-list>
    </div>
  </ion-content>
</ion-view>

<!-- Footer -->
<ion-footer-bar class="bar-positive" align-title="center">
  <a id="footer-left" ui-sref="history" class="button button-clear pull-left">History</a>
  <h1 class='title' style='line-height: 100%; padding-top: 6px;'>
    <i class="icon ion-checkmark self-report-footer-icon" ng-if="status =='done'"></i>
    <i class="icon ion-looping self-report-footer-icon" ng-if="status =='loading'"></i>
    <a ng-click='reconnectCouchDB()'>
      <i class="icon ion-alert-circled self-report-footer-icon" ng-if="status =='alert'" ></i>
      <img src='./img/icons/offline.png' height='80%' ng-if="status == 'offline'"/>
    </a>
  </h1>
  <a id="footer-right" ui-sref="editTopics" class="button button-clear pull-right">Edit topics</a>
</ion-footer-bar>

<!-- Tutorial -->
<script id="tutorial-modal" type="text/ng-template">
  <ion-modal-view>
    <ion-content>
      <ion-slide-box style="background: white" class='tutorial'>
        <ion-slide style="height: {{ modalHeight }}px;">
          <div class="box">
            <div class='title'>1. Observations</div>
            <div class='img-wrapper'>
              <img src='img/tutorial/tutorial-01.png'>
            </div>
            <div class='tutorial-quote pos-bottom'><p>Start by creating a topic</p></div>
            <button class='skip-button' ng-click="dismissTutorialModal()">Skip</button>
            <button class='next-button' ng-click="tutorialNext()">Next</button>
          </div>
        </ion-slide>
        <ion-slide style="height: {{ modalHeight }}px;">
          <div class="box">
            <div class='title'>1. Observations</div>
            <div class='img-wrapper'>
              <img src='img/tutorial/tutorial-02.png'>
            </div>
            <div class='tutorial-quote pos-bottom'><p>Enter topic name and select its type</p></div>
            <button class='skip-button' ng-click="dismissTutorialModal()">Skip</button>
            <button class='next-button' ng-click="tutorialNext()">Next</button>
          </div>
        </ion-slide>
        <ion-slide style="height: {{ modalHeight }}px;">
          <div class="box">
            <div class='title'>1. Observations</div>
            <div class='img-wrapper'>
              <img src='img/tutorial/tutorial-03.png'>
            </div>
            <div class='tutorial-quote pos-bottom'><p>Tap a topic to make a new observation</p></div>
            <button class='skip-button' ng-click="dismissTutorialModal()">Skip</button>
            <button class='next-button' ng-click="tutorialNext()">Next</button>
          </div>
        </ion-slide>
        <ion-slide style="height: {{ modalHeight }}px;">
          <div class="box">
            <div class='title'>1. Observations</div>
            <div class='img-wrapper'>
              <img src='img/tutorial/tutorial-04.png'>
            </div>
            <div class='tutorial-quote pos-bottom'><p>Each observation can be tuned</p></div>
            <button class='skip-button' ng-click="dismissTutorialModal()">Skip</button>
            <button class='next-button' ng-click="tutorialNext()">Next</button>
          </div>
        </ion-slide>
        <ion-slide style="height: {{ modalHeight }}px;">
          <div class="box">
            <div class='title'>1. Observations</div>
            <div class='img-wrapper'>
              <img src='img/tutorial/tutorial-05.png'>
            </div>
            <div class='tutorial-quote pos-bottom'><p>You can access the list of all the observations you've made</p></div>
            <button class='skip-button' ng-click="dismissTutorialModal()">Skip</button>
            <button class='next-button' ng-click="tutorialNext()">Next</button>
          </div>
        </ion-slide>
        <ion-slide style="height: {{ modalHeight }}px;">
          <div class="box">
            <div class='title'>2. Photos</div>
            <div class='img-wrapper'>
              <img src='img/tutorial/tutorial-06.png'>
            </div>
            <div class='tutorial-quote pos-bottom'><p>You can view all your photos and upload them to Fluxtream</p></div>
            <button class='skip-button' ng-click="dismissTutorialModal()">Skip</button>
            <button class='next-button' ng-click="tutorialNext()">Next</button>
          </div>
        </ion-slide>
        <ion-slide style="height: {{ modalHeight }}px;">
          <div class="box">
            <div class='title'>2. Photos</div>
            <div class='img-wrapper'>
              <img src='img/tutorial/tutorial-07.png'>
            </div>
            <div class='tutorial-quote pos-bottom'><p>Upload automatically all photos you take in a given orientation</p></div>
            <button class='skip-button' ng-click="dismissTutorialModal()">Skip</button>
            <button class='next-button' ng-click="tutorialNext()">Next</button>
          </div>
        </ion-slide>
        <ion-slide style="height: {{ modalHeight }}px;">
          <div class="box">
            <div class='title'>2. Photos</div>
            <div class='img-wrapper'>
              <img src='img/tutorial/tutorial-08.png'>
            </div>
            <div class='tutorial-quote pos-bottom'><p>View and edit photo metadata</p></div>
            <button class='skip-button' ng-click="dismissTutorialModal()">Skip</button>
            <button class='next-button' ng-click="tutorialNext()">Next</button>
          </div>
        </ion-slide>
        <ion-slide style="height: {{ modalHeight }}px;">
          <div class="box">
            <div class='title'>3. Heart rate</div>
            <div class='img-wrapper'>
              <img src='img/tutorial/tutorial-10.png'>
            </div>
            <div class='tutorial-quote pos-bottom-middle'><p>Update your heart rate monitor data directly to Fluxtream</p></div>
            <button class='skip-button' ng-click="dismissTutorialModal()">Skip</button>
            <button class='next-button' ng-click="dismissTutorialModal()">Start</button>
          </div>
        </ion-slide>
        </ion-slide>
      </ion-slide-box>
    </ion-content>
  </ion-modal-view>
</script>
